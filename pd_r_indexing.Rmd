# A comparison of indexing and subsetting in R and Python {-}


## Dataframes {-}

In what follows we assume Python has access to a dataframe called mtcars which is constructed on the same basis as the R one.

```{python eval=FALSE, engine.path="/Users/robinlinacre/anaconda/bin/python.app"}
import pandas as pd 
mtcars = pd.read_csv("https://vincentarelbundock.github.io/Rdatasets/csv/datasets/mtcars.csv", index_col=0)
```


### Selecting rows {-}

#### Selecting row by numeric index {-}

**`R`**
```{r eval=FALSE}
mtcars[1,]
mtcars[c(1,2),]
```

This returns a `'data.frame':	1 obs. of  11 variables`

**`Python`**
```{python eval=FALSE, engine.path="/Users/robinlinacre/anaconda/bin/python.app"} 
mtcars.iloc[0,:]
mtcars.iloc[[0,1],:]
```

This returns a `pandas.core.series.Series`

#### Selecting row by named index {-}

**`R`**
```{r eval=FALSE}
mtcars['Mazda RX4', ]
```

This returns a `'data.frame':	1 obs. of  11 variables`

**`Python`**
```{python eval=FALSE, engine.path="/Users/robinlinacre/anaconda/bin/python.app"} 
mtcars.loc['Mazda RX4',:]
```

This returns a `pandas.core.series.Series`

### Selecting columns {-}

#### Selecting column by numeric index {-}

**`R`**
```{r eval=FALSE}
mtcars[,1 ]
```

This returns a numeric vector.

**`Python`**
```{python eval=FALSE, engine.path="/Users/robinlinacre/anaconda/bin/python.app"} 
mtcars.iloc[:,0]
```

This returns a `pandas.core.series.Series`

### Selecting individual 'cells' (items) {-}

#### Selecting item by numeric index {-}

**`R`**
```{r eval=FALSE}
mtcars[1,1 ]
```

This returns a numeric vector with a single item

**`Python`**
```{python eval=FALSE, engine.path="/Users/robinlinacre/anaconda/bin/python.app"} 
mtcars.iloc[0,0]
```

This returns a float

#### Selecting item by named index {-}

**`R`**
```{r eval=FALSE}
mtcars['Mazda RX4','mpg']
```

This returns a numeric atomic vector with a single item.

**`Python`**
```{python eval=FALSE, engine.path="/Users/robinlinacre/anaconda/bin/python.app"} 
mtcars.loc['Mazda RX4','mpg]
```

This returns a float.

#### Obtaining the index itself

**`Python`**
```{python eval=FALSE, engine.path="/Users/robinlinacre/anaconda/bin/python.app"} 
mtcars.index
mtcars.columns
```
These are both of type `pandas.indexes.base.Index`

**`R`**
```{r eval=FALSE}
names(mtcars)
rownames(mtcars)
```
These are both atomic vectors of strings.

###  Edge cases? {-}

Things can get ambiguous in two situations:

1. You have integer row or column names which aren't just ascending integers starting at 0 (Python) or 1 (R).  This creates an ambiguity between indexing my name or by number
2. You have an index with duplicate values.


#### Integer row/columns names which aren't just 1,2,3...,n

In R, row names are always strings, which resolves this ambiguity  

**`R`**
```{r eval=FALSE}
df <- read.csv("https://gist.githubusercontent.com/RobinL/7378abcb98d70f642a4047f4e01fd428/raw/a9f998ad9fdc314b1019fbc1866a2ea97d717b6a/f.csv", row.names = 1)
df[c(1,2,3),]
df[]
```



### Subsetting


#Setup {-}

Here are some notes on running the code in this .Rmd.

To run the code, you'll want to remove `eval=FALSE` from the code blocks.

In what follows we are going to use the `mtcars` dataset.  If you want to run this code in Python, you'll need access to the dataset.  You can get this by doing:  `pip install ggplot` and then in python `from ggplot import mtcars`

Note that in order for the Python code to execute, you need to make sure that `Sys.which('python')` returns the path for Anaconda rather than Mac OS default python.  See [here](http://rmarkdown.rstudio.com/authoring_knitr_engines.html), [here](http://stackoverflow.com/questions/27097169/why-r-is-calling-system-python-instead-of-default-python-in-user-path) and [here](https://support.rstudio.com/hc/en-us/community/posts/207644217-Rstudio-server-doesn-t-have-login-user-s-environment-variables-).  The solution I found was 

````
cd ~
echo .Renviron >> PATH=/Users/robinlinacre/anaconda/bin
````
